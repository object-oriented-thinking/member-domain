# Member Domain

## 회원

### 속성

- 사용자 식별자, 사용자 이름, 이메일, 비밀번호, 그리고 회원 유형이 들어간다.
    - 사용자 이름은 공백과 욕설이 들어가면 안되고, 1글자 이상, 20글자 이하여야 한다.
    - 비밀번호에 특수문자가 들어가야 하고, 8글자 이상 30글자 이하여야 한다.
    - 이메일은 이메일 형식에 맞아야 하고, 도메인은 `gmail`, `naver`, `daum`만 가능하다.
    - 회원 유형은 인증 유무에 따라 변하며, 지원자(`APPLICANT`), 회원(`MEMBER`) 중 하나의 정보를 가진다.

### 행위

- 회원가입을 하기 위해 이메일과 지원자 이름, 그리고 비밀번호를 가지고 회원가입을 요청한다.
    - 회원(`MEMBER`)과 이메일 중복이 되어서는 안된다.
    - 지원자(`APPLICANT`)가 재지원하게 된다면, 이전 정보를 삭제하고 현재 지원자의 정보를 저장한다.
    - 지원자(`APPLICANT`)의 정보를 저장한다.
    - 인증을 요청한다.
- 지원자 이메일 정보를 가져와 지원자의 회원 가입을 허락한다.
    - 지원자(`APPLICANT`)만 회원 가입을 허락할 수 있다.
    - 회원(`MEMBER`)으로 변경한다.
- 회원의 이름 정보를 가져와 사용자 이름을 수정한다.
    - 사용자 이름 정책은 사용자의 유형이 회원일 경우에만 이름을 변경할 수 있고, 기존 이름으로 변경할 수 없다.
- 회원은 현재 비밀번호의 정보와 새 비밀번호 정보를 가져와 비밀번호 변경한다.
    - 회원만 비밀번호를 수정할 수 있다.
    - 현재 비밀번호가 맞아야 한다.
    - 새 비밀번호는 비밀번호의 정책에 맞아야 한다.
- 회원은 본인 인증이 완료되면 회원 탈퇴를 진행한다.
    - 회원만 회원 탈퇴를 진행할 수 있다.
    - 사용자 회원 탈퇴 정책인 본인 인증 완료가 되어야 한다.

## 인증

### 속성

- 인증은 인증코드 식별자, 인증하려는 지원자의 식별자, 인증 토큰의 정보를 가진다.
    - 인증 토큰은 해당 토큰을 통해 지원자 이메일 정보를 확인할 수 있다.

### 행위

- 지원자의 정보를 가져와 인증을 요청한다.
    - 이미 보낸 지원자이면 존재하는 인증에서 인증토큰 정보를 갱신하고, 그렇지 않으면 인증 토큰을 토대로 인증을 생성한다.
    - 알림 정책을 통해 인증 코드 알림을 보낸다.
- 지원자의 인증 코드를 받아 인증한다.
    - 인증 토큰를 식별해 이메일을 반환받는다.
    - 해당 이메일을 사용하는 지원자의 회원 가입을 허락한다.

## 인증 토큰

### 속성

- 인증 토큰은 해당 지원자의 이메일 정보와 유효 시각 정보를 가진다.
    - 유효 시간은 등록하는 시각에서 30분이 지난 시각이다.

### 행위

- 지원자의 이메일 정보를 가져와 인증 토큰을 생성한다.
    - 지원자의 이메일 정보와 현재 시각에서 30분이 지난 시각을 가지고 인증 토큰을 생성한다.
- 인증 코드를 가져와 인증 코드를 식별한다.
    - 인증 코드를 받아 이메일과 유효 시간 정보를 식별한다.
    - 유효 시각을 지났다면 `InvalidTokenException` 예외가 발생한다.

## 알림

### 행위

- 인증 토큰을 받아 이메일을 보낸다.
    - 성공적으로 보내지 못하면 `EmailTransferException` 예외가 발생한다.
